diff --git a/Makefile b/Makefile
index f8a1772..66bccf3 100644
--- a/Makefile
+++ b/Makefile
@@ -5,7 +5,7 @@
 # bzip2/libbzip2 version 1.0.8 of 13 July 2019
 # Copyright (C) 1996-2019 Julian Seward <jseward@acm.org>
 #
-# Please read the WARNING, DISCLAIMER and PATENTS sections in the 
+# Please read the WARNING, DISCLAIMER and PATENTS sections in the
 # README file.
 #
 # This program is released under the terms of the license contained
@@ -61,7 +61,7 @@ test: bzip2
 	./bzip2 -d  < sample1.bz2 > sample1.tst
 	./bzip2 -d  < sample2.bz2 > sample2.tst
 	./bzip2 -ds < sample3.bz2 > sample3.tst
-	cmp sample1.bz2 sample1.rb2 
+	cmp sample1.bz2 sample1.rb2
 	cmp sample2.bz2 sample2.rb2
 	cmp sample3.bz2 sample3.rb2
 	cmp sample1.tst sample1.ref
@@ -108,7 +108,7 @@ install: bzip2 bzip2recover
 	echo ".so man1/bzmore.1" > $(PREFIX)/man/man1/bzless.1
 	echo ".so man1/bzdiff.1" > $(PREFIX)/man/man1/bzcmp.1
 
-clean: 
+clean:
 	rm -f *.o libbz2.a bzip2 bzip2recover \
 	sample1.rb2 sample2.rb2 sample3.rb2 \
 	sample1.tst sample2.tst sample3.tst
@@ -203,7 +203,7 @@ dist: check manual
 # For rebuilding the manual from sources on my SuSE 9.1 box
 
 MANUAL_SRCS= 	bz-common.xsl bz-fo.xsl bz-html.xsl bzip.css \
-		entities.xml manual.xml 
+		entities.xml manual.xml
 
 manual: manual.html manual.ps manual.pdf
 
diff --git a/Makefile-libbz2_so b/Makefile-libbz2_so
index fb0f230..41f29f1 100644
--- a/Makefile-libbz2_so
+++ b/Makefile-libbz2_so
@@ -1,9 +1,9 @@
 
-# This Makefile builds a shared version of the library, 
+# This Makefile builds a shared version of the library,
 # libbz2.so.1.0.8, with soname libbz2.so.1.0,
-# at least on x86-Linux (RedHat 7.2), 
-# with gcc-2.96 20000731 (Red Hat Linux 7.1 2.96-98).  
-# Please see the README file for some important info 
+# at least on x86-Linux (RedHat 7.2),
+# with gcc-2.96 20000731 (Red Hat Linux 7.1 2.96-98).
+# Please see the README file for some important info
 # about building the library like this.
 
 # ------------------------------------------------------------------
@@ -13,7 +13,7 @@
 # bzip2/libbzip2 version 1.0.8 of 13 July 2019
 # Copyright (C) 1996-2019 Julian Seward <jseward@acm.org>
 #
-# Please read the WARNING, DISCLAIMER and PATENTS sections in the 
+# Please read the WARNING, DISCLAIMER and PATENTS sections in the
 # README file.
 #
 # This program is released under the terms of the license contained
@@ -25,6 +25,14 @@ SHELL=/bin/sh
 CC=gcc
 BIGFILES=-D_FILE_OFFSET_BITS=64
 CFLAGS=-fpic -fPIC -Wall -Winline -O2 -g $(BIGFILES)
+PREFIX=/usr/local
+
+ifeq ($(shell uname -s), Linux)
+SHLIB=libbz2.so.1.0.8
+endif
+ifeq ($(shell uname -s), Darwin)
+SHLIB=libbz2.1.dylib
+endif
 
 OBJS= blocksort.o  \
       huffman.o    \
@@ -34,13 +42,22 @@ OBJS= blocksort.o  \
       decompress.o \
       bzlib.o
 
-all: $(OBJS)
-	$(CC) -shared -Wl,-soname -Wl,libbz2.so.1.0 -o libbz2.so.1.0.8 $(OBJS)
-	$(CC) $(CFLAGS) -o bzip2-shared bzip2.c libbz2.so.1.0.8
-	rm -f libbz2.so.1.0
-	ln -s libbz2.so.1.0.8 libbz2.so.1.0
+all: $(SHLIB)
 
-clean: 
+libbz2.so.1.0.8: $(OBJS)
+	$(CC) -shared -Wl,-soname -Wl,libbz2.so.1.0 -o $(SHLIB) $(OBJS)
+	$(CC) $(CFLAGS) -o bzip2-shared bzip2.c $(SHLIB)
+	rm -f libbz2.so.1.0 libbz2.so.1 libbz2.so
+	ln -s $(SHLIB) libbz2.so.1.0
+	ln -s libbz2.so.1.0 libbz2.so.1
+	ln -s libbz2.so.1   libbz2.so
+
+libbz2.1.dylib: $(OBJS)
+	$(CC) -shared -Wl,-install_name -Wl,$(PREFIX)/lib/$(SHLIB) -o $(SHLIB) $(OBJS)
+	rm -f libbz2.dylib
+	ln -s $(SHLIB) libbz2.dylib
+
+clean:
 	rm -f $(OBJS) bzip2.o libbz2.so.1.0.8 libbz2.so.1.0 bzip2-shared
 
 blocksort.o: blocksort.c
